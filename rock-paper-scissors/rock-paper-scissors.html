<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>じゃんけん</title>
</head>
<body>
  <div class="comWrapper">
    <div class="comChoose"></div>
    <p class="comPatterns"></p>
  </div>
  <div class="playerBtn">
    <button class="playerChoose playerRock">グー</button>
    <button class="playerChoose playerpaper">パー</button>
    <button class="playerChoose playerScissors">チョキ</button>
  </div>
  <p class="result"></p>
  <button class="reset">RESET</button>
</body>
<style>

  .comWrapper{
    text-align: center;
  }

  .comChoose{
    width: 250px;
    height: 250px;
    margin: auto;
  }

  .comChoose.rock{
    background-image: url(img/janken_gu.png);
    background-size: cover;
  }

  .comChoose.paper{
    background-image: url(img/janken_pa.png);
    background-size: cover;
  }

  .comChoose.scissors{
    background-image: url(img/janken_choki.png);
    background-size: cover;
  }

  .playerBtn{
    text-align: center;
  }

  .playerChoose{
    margin: 5px;
  }

  .result{
    text-align: center;
  }

</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript">
  $(function(){

    var comPatterns = ["rock", "paper", "scissors"];
    var playerChoose;
    var playerPatternsRock = [];
    var playerPatternsPaper = [];
    var playerPatternsScissors = [];
    var count = 0;

    $(".playerChoose").on("click", function(){

      count++;

      var pattern = Math.floor(Math.random()*(comPatterns.length));
      var comChoose;

      if($(this).hasClass("playerRock")){
        playerChoose = "rock";
        playerPatternsRock.push(playerChoose);
      } else if($(this).hasClass("playerpaper")){
        playerChoose = "paper";
        playerPatternsPaper.push(playerChoose)
      } else if($(this).hasClass("playerScissors")){
        playerChoose = "scissors";
        playerPatternsScissors.push(playerChoose)
      }

      console.log(count);

      if(count > 5){
        if(playerPatternsRock.length > playerPatternsScissors.length){
          comChoose = comPatterns[1];
          $(".comChoose").removeClass("rock paper scissors");
          $(".comChoose").addClass(comChoose);
        } else if(playerPatternsPaper.length > playerPatternsRock.length){
          comChoose = comPatterns[2];
          $(".comChoose").removeClass("rock paper scissors");
          $(".comChoose").addClass(comChoose);
        } else if(playerPatternsScissors.length > playerPatternsPaper.length){
          comChoose = comPatterns[0];
          $(".comChoose").removeClass("rock paper scissors");
          $(".comChoose").addClass(comChoose);
        } else {
          comChoose = comPatterns[pattern];
          $(".comChoose").removeClass("rock paper scissors");
          $(".comChoose").addClass(comChoose);
        }
      } else {
        comChoose = comPatterns[pattern];
        $(".comChoose").removeClass("rock paper scissors");
        $(".comChoose").addClass(comChoose);
      }

      $(".comPatterns").text("ぽん！");


      var eachPattern = [];
      eachPattern.push(playerChoose, comChoose);

      if(comChoose === playerChoose){
        $(".result").text("あいこです");
      } else if(playerChoose === "rock" && comChoose === "scissors"){
        $(".result").text("プレイヤーの勝ち！")
      } else if(playerChoose === "rock" && comChoose === "paper"){
        $(".result").text("コンピュータの勝ち！")
      } else if(playerChoose === "paper" && comChoose === "rock"){
        $(".result").text("プレイヤーの勝ち！")
      } else if(playerChoose === "paper" && comChoose === "scissors"){
        $(".result").text("コンピュータの勝ち！")
      } else if(playerChoose === "scissors" && comChoose === "paper"){
        $(".result").text("プレイヤーの勝ち！")
      } else if(playerChoose === "scissors" && comChoose === "rock"){
        $(".result").text("コンピュータの勝ち！")
      }

    });

  });
</script>
</html>